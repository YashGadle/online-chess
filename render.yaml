services:
  # =========================
  # GO BACKEND (API) with embedded frontend
  # =========================
  - type: web
    name: online-chess-go
    env: go
    plan: free

    rootDir: ./

    buildCommand: make build

    startCommand: make run

    envVars:
      - key: GO_VERSION
        value: 1.25.5
      - key: APP_ENV
        value: production
      - key: REDIS_URL
        sync: false  # Set this in Render dashboard

    # Health check endpoint
    healthCheckPath: /api/health